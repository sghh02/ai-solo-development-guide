# 設計段階

## 📋 このセクションの使い方

このページは **「企画段階で決定した要件定義を具体的な設計に落とし込む」** ための逆引きガイドです。

### ✅ 前提条件

- **要件定義書**（requirements.md）が企画段階で作成済み
- **プロジェクト概要・主要機能・技術スタック**が決定済み
- **document/ ディレクトリ**での管理準備ができている

### 📁 ドキュメント管理

```
project/
├── document/
│   ├── requirements.md          # 企画段階で作成済み
│   ├── design/
│   │   ├── ui_design.md        # このページで作成
│   │   ├── data_design.md      # このページで作成
│   │   ├── system_design.md    # このページで作成
│   │   ├── api_design.md       # このページで作成
│   │   └── wireframes/         # HTML・画像ファイル
└── src/                        # 実装段階で作成
```

### 🤖 AI ツール使い分け

- **このページ（設計段階）**: Claude（設計相談・レビュー・ドキュメント作成）
- **実装段階**: ClaudeCode（コード生成・実装支援）
- **詳細**: [AIツール使い分けガイド](AIツール使い分けガイド.md)

---

## 🎯 4つの状況別ナビゲーション

あなたの現在の状況に最も近いものを選んで、該当セクションに進んでください：

| 状況 | 詳細 | 進むセクション |
|-----|------|---------------|
| 🖼️ **画面設計から始めたい** | UIを先に考えて全体を決めたい | [→ セクション2へ](#🖼️-画面設計から始める) |
| 🗄️ **データ設計から始めたい** | どんなデータを扱うか整理したい | [→ セクション3へ](#🗄️-データ設計から始める) |
| 🔗 **API設計から始めたい** | システム間の連携を先に設計したい | [→ セクション4へ](#🔗-api設計から始める) |
| 🤔 **何から始めればいいかわからない** | 設計の進め方自体がわからない | [→ セクション5へ](#🤔-設計の進め方がわからない) |

---

## 🖼️ 画面設計から始める

**ステップ概要**: 要件定義 → 参考デザイン収集 → HTML作成 → 調整が必要ならFigma化、そのままでOKならHTMLをデザインとして使用。

### 🚀 効率的な画面設計ステップ

#### Step 1: 要件定義から画面の洗い出し

**プロンプトテンプレート**:
```
requirements.md を元に、必要な画面を洗い出してください：

【添付資料】
- requirements.md

【出力内容】
1. 画面一覧（機能から導出）
2. 各画面の目的・主要要素
3. 画面遷移フロー
4. MVP vs 将来機能での優先度

【保存先】
document/design/ui_design.md
```

#### Step 2: 参考デザインの収集

**ポイント**:
- **あなたが使いやすいと思うサイト**を選ぶ
- ジャンルにこだわらず、**雰囲気・使いやすさ重視**で選択
- スクリーンショット + URLを保存

**収集先例**:
- よく使うアプリ・サービス
- Pinterest, Dribbble（デザイン投稿サイト）
- 「UI デザイン 参考」検索結果

#### Step 3: Claude でHTML作成

**プロンプトテンプレート**:
```
添付した ui_design.md と参考URLを元に、HTMLページを作成してください：

【添付資料】
- ui_design.md （Step1で作成済み）

【参考URL】
- [収集した参考サイトのURL]

【画面仕様】
- 画面名：[ui_design.md で決めた画面名]
- 目的：[ui_design.md の該当機能]
- 必要要素：[ui_design.md で整理した要素]

【技術要件】
- レスポンシブ対応
- ui_design.md の技術スタックに準拠
- 実装でそのまま使えるレベル

【参考URLの活用方針】
- 雰囲気・色使いを参考
- レイアウト構成を参考
- 文言は ui_design.md に合わせて調整

【保存先】
document/design/wireframes/[画面名].html
```

#### Step 4: HTMLの評価と次のアクション決定

**HTMLデザインの評価**:
1. **ブラウザで表示確認**
2. **レスポンシブ動作確認**（スマホ・タブレット・PC）
3. **要件との整合性確認**

**分岐判断**:

**パターンA: HTMLでOK → そのままデザインとして使用**
- HTMLのデザインが期待通り
- 細かい調整は実装時に対応可能
- **アクション**: `document/design/wireframes/[画面名].html` として保存完了

**パターンB: 調整が必要 → Figma化して詳細調整**
- HTMLでは表現しきれない細かいデザイン調整が必要
- チーム共有やプレゼンが必要
- **アクション**: 
  1. html.to.design で変換: https://html.to.design/
  2. Figmaで細かい調整（位置・色・フォント等）
  3. 調整完了後、HTMLも更新

**判断基準**:
```
HTMLでOKの場合：
✅ レイアウトが適切
✅ 色・フォントが要件に合っている  
✅ レスポンシブが正常動作
✅ 実装者（自分）が理解できる

Figma化が必要な場合：
❌ 細かい位置調整が必要
❌ 色・フォントの微調整が必要
❌ チーム共有・プレゼン資料が必要
❌ より精密なデザイン仕様書が必要
```

### 🔄 うまくいかない時の対処法

#### 会話が続きすぎた場合
**新規チャット開始のタイミング**:
- 修正のやり取りが **5回以上** 続いた
- AIが混乱している様子が見られる

**新規チャット時の改善**:
1. 前回の良かった部分をスクリーンショット保存
2. 問題点を明確化
3. より具体的なプロンプトに修正
4. 参考画像を見直し

#### デザインがうまく作れない場合
**原因と対策**:
- **要件が不明確** → requirements.md の該当機能を再確認
- **プロンプトが曖昧** → より具体的な指示に変更
- **参考画像が不適切** → 別の参考デザインに変更

---

## 🗄️ データ設計から始める

**ステップ概要**: 要件からデータを洗い出し → 技術に応じたデータ設計（DB・状態管理）を行います。

### 📋 データ設計の基本手順

#### Step 1: 要件からデータ洗い出し

**プロンプトテンプレート**:
```
requirements.md の機能要件から、必要なデータを洗い出してください：

【添付資料】
- requirements.md

【出力内容】
1. 各機能で必要なデータ
2. データの属性詳細
3. データ間の関係性
4. MVP vs 将来機能での優先度

【保存先】
document/design/data_design.md
```

#### Step 2: 技術選択別の設計

**リレーショナルDB（MySQL/PostgreSQL）**:
```
requirements.md の要件を満たすテーブル設計をしてください：

【添付資料】
- requirements.md
- [Step1のデータ整理結果]

【出力内容】
- CREATE TABLE文
- インデックス設計
- 外部キー制約
- サンプルデータ例

個人開発レベルでシンプルに設計してください。
```

**NoSQL（MongoDB/Firestore）**:
```
requirements.md の要件を満たすドキュメント設計をしてください：

【添付資料】
- requirements.md
- [Step1のデータ整理結果]

【出力内容】
- コレクション設計
- ドキュメント構造（JSON）
- クエリパターン例
- インデックス設計

読み取り性能を重視した設計にしてください。
```

**フロントエンド状態管理**:
```
requirements.md に基づいて状態管理を設計してください：

【添付資料】
- requirements.md

【出力内容】
- グローバル状態とローカル状態の切り分け
- 状態更新パターン
- データ永続化戦略
- エラー状態管理

requirements.md の技術スタックに準拠してください。
```

---

## 🔗 API設計から始める

**ステップ概要**: フロントエンド・バックエンド・外部サービス間の連携を先に設計し、全体のデータフローを明確化します。

### 🌐 API設計の基本手順

#### Step 1: 要件からAPI要件の洗い出し

**プロンプトテンプレート**:
```
requirements.md の機能要件から、必要なAPIを洗い出してください：

【添付資料】
- requirements.md

【出力内容】
1. 各機能で必要なAPI操作
2. データの入出力仕様
3. 外部サービス連携の有無
4. 認証・認可要件
5. MVP vs 将来機能での優先度

【保存先】
document/design/api_design.md
```

#### Step 2: RESTful API設計

**プロンプトテンプレート**:
```
requirements.md に基づいてREST APIを設計してください：

【添付資料】
- requirements.md
- [Step1のAPI要件整理結果]

【設計要件】
- RESTful原則に従う
- requirements.md で定義された機能をAPI化
- 認証・認可を考慮
- エラーハンドリング・バリデーション

【出力内容】
1. エンドポイント一覧
2. リクエスト/レスポンス例
3. 認証方式
4. エラーレスポンス定義
5. OpenAPI仕様（簡易版）

【技術要件】
- requirements.md の技術スタックに準拠
- 個人開発に適したシンプルな設計

【保存先】
document/design/api_design.md
```

#### Step 3: 外部API連携設計（必要な場合）

**プロンプトテンプレート**:
```
requirements.md で必要な外部API連携を設計してください：

【添付資料】
- requirements.md
- [内部API設計結果]

【連携対象】
[requirements.md で指定された外部サービス]

【設計内容】
1. 外部API仕様調査
2. 認証方法・API制限確認
3. データ変換・エラーハンドリング設計
4. レート制限・障害対応設計

【出力先】
document/design/api_design.md に追記
```

#### Step 4: API仕様書の完成

**最終確認事項**:
- [ ] requirements.md のMVP機能がカバーされている
- [ ] 技術スタックと整合している
- [ ] 実装時に参照しやすい形式になっている
- [ ] セキュリティ要件が満たされている

---

## 🤔 設計の進め方がわからない

**ステップ概要**: プロジェクト規模と経験レベルに応じて、最適な設計順序を決定します。

### 📋 方向性の決定

**プロンプトテンプレート**:
```
requirements.md は完成していますが、設計をどの順序で進めるべきか教えてください：

【添付資料】
- requirements.md

【私の状況】
- 技術経験：[年数とスキル]
- 設計経験：[あり・なし・少し]
- 重視したいこと：[学習・実用性・速度]

【判断依頼】
以下のどの順序が適切か判断してください：
A) 画面設計 → データ設計 → システム設計
B) データ設計 → 画面設計 → システム設計
C) その他

理由と具体的な進め方も教えてください。
```

### 🎯 プロジェクト規模別アプローチ

#### 小規模（1-2週間）
**推奨**: 画面設計優先
1. 主要画面の設計
2. 必要な機能の整理
3. シンプルなデータ設計
4. API設計（必要な場合）
5. すぐに実装開始

#### 中規模（3-4週間）
**推奨**: バランス重視
1. 全体像の把握
2. コア機能の詳細設計
3. 画面とデータ設計を並行
4. API設計（必要な場合）
5. 段階的実装

#### 大規模（1ヶ月以上）
**推奨**: 設計優先
1. 要件の詳細分析
2. システム全体設計
3. データ設計
4. API設計
5. 画面設計
6. 実装開始

---

## 🔧 システム設計

**ステップ概要**: 全体アーキテクチャを設計し、システム全体の構成を決定します。

### 🏗️ アーキテクチャ設計

**プロンプトテンプレート**:
```
requirements.md に基づいてシステム全体を設計してください：

【添付資料】
- requirements.md

【出力内容】
1. 全体アーキテクチャ図（テキスト）
2. 技術スタック詳細
3. ディレクトリ構成
4. デプロイ戦略

【保存先】
document/design/system_design.md

個人開発に適したシンプルな構成にしてください。
```

### 📊 規模別アーキテクチャ

| 規模 | アーキテクチャ | 特徴 |
|-----|--------------|------|
| **小規模** | 3層構造 | 学習コスト低、高速開発 |
| **中規模** | MVC + API分離 | 拡張性と保守性の両立 |
| **大規模** | マイクロサービス風 | 機能別分離 |

---

## 📝 設計書テンプレート

### 🎯 統合設計書

```markdown
# [プロジェクト名] 設計書

## 基本情報
- 作成日：[日付]
- 基準要件：requirements.md v[バージョン]

## 画面設計
### 画面一覧
| 画面名 | 対応機能 | 主要要素 | ファイル |
|--------|---------|---------|---------|
| [画面1] | [requirements.mdの機能] | [要素] | wireframes/[ファイル名] |

### 画面遷移
[機能要件に基づく画面の流れ]

## データ設計
### 主要データ
| データ名 | 対応機能 | 属性 | 保存方式 |
|---------|---------|------|---------|
| [データ1] | [機能] | [属性] | [DB/ローカル] |

## システム設計
### 技術構成
- requirements.md で決定済み技術に準拠
- [具体的な技術構成]

### 全体アーキテクチャ
[システム全体の構成説明]

## 実装計画
### Phase 1（MVP）
- [ ] [requirements.mdのMVP機能対応]

### Phase 2（機能拡張）  
- [ ] [将来機能対応]

## 要件との整合性
- [ ] requirements.md の全機能カバー
- [ ] 技術スタック一致
- [ ] 成功基準実現可能
```

---

## ✅ 完了チェックリスト

### 🎯 設計完了の判断基準

**必須項目**:
- [ ] **requirements.md の全機能**が設計に反映
- [ ] **技術スタック**が一致
- [ ] **MVP機能**が明確に設計
- [ ] **document/design/ 配下**にファイル保存

**各設計の完了**:
- [ ] **画面設計**: HTML/Figma完成、遷移フロー明確
- [ ] **データ設計**: データ構造・保存方式決定
- [ ] **システム設計**: 全体構成・技術詳細決定

### 🚀 実装段階への移行準備

**環境準備**:
- [ ] 開発環境構築手順確認
- [ ] document/ ディレクトリ準備完了
- [ ] Git リポジトリ準備

**AIツール準備**:
- [ ] ClaudeCode 活用方針確認
- [ ] 設計書のClaudeCode連携方法確認

---

## 💪 次のアクション

### ✅ 設計完了の方
[実装段階](#) で ClaudeCode を活用した開発開始

### 📝 設計途中の方
requirements.md を参照して Claude に相談し、設計を完成

### ❓ 迷っている方
「設計の進め方がわからない」セクションで方向性を決定

---

## 🔗 関連セクション

| セクション | 内容 | 参照タイミング |
|-----------|------|---------------|
| **[企画・アイデア段階](企画・アイデア段階.md)** | 要件定義作成・修正 | requirements.md を見直したい |
| **[実装段階](#)** | ClaudeCode活用開発 | 設計完了後の実装 |
| **[AIツール使い分け](AIツール使い分けガイド.md)** | Claude vs ClaudeCode | ツール使い分けを知りたい |

**重要**: 設計は requirements.md の要件を満たす最低限で完了とし、**動くものを早く作る**ことを優先しましょう！